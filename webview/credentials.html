<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'unsafe-inline'; script-src 'unsafe-inline';">
    <title>L1X Credentials</title>
    <style>
        body {
            font-family: var(--vscode-font-family);
            font-size: var(--vscode-font-size);
            color: var(--vscode-foreground);
            background-color: var(--vscode-editor-background);
            margin: 0;
            padding: 20px;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--vscode-panel-border);
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: none;
            background: none;
            color: var(--vscode-foreground);
            border-bottom: 2px solid transparent;
        }
        
        .tab.active {
            border-bottom-color: var(--vscode-focusBorder);
            color: var(--vscode-focusBorder);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        input {
            width: 100%;
            padding: 8px;
            border: 1px solid var(--vscode-input-border);
            background-color: var(--vscode-input-background);
            color: var(--vscode-input-foreground);
            border-radius: 3px;
            box-sizing: border-box;
        }
        
        input:focus {
            outline: none;
            border-color: var(--vscode-focusBorder);
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 8px 16px;
            border: 1px solid var(--vscode-button-border);
            background-color: var(--vscode-button-background);
            color: var(--vscode-button-foreground);
            border-radius: 3px;
            cursor: pointer;
            font-size: var(--vscode-font-size);
        }
        
        button:hover {
            background-color: var(--vscode-button-hoverBackground);
        }
        
        button:active {
            background-color: var(--vscode-button-background);
        }
        
        .status {
            margin-top: 15px;
            padding: 10px;
            border-radius: 3px;
            display: none;
        }
        
        .status.success {
            background-color: var(--vscode-testing-iconPassed);
            color: var(--vscode-editor-background);
        }
        
        .status.error {
            background-color: var(--vscode-testing-iconFailed);
            color: var(--vscode-editor-background);
        }
    </style>
</head>
<body>
    <div class="tabs">
        <button class="tab active" onclick="switchTab('uat')">UAT Environment</button>
        <button class="tab" onclick="switchTab('production')">Production Environment</button>
    </div>
    
    <div id="uat" class="tab-content active">
        <h3>UAT Environment Credentials</h3>
        <div class="form-group">
            <label for="uat-merchant-id">Merchant ID:</label>
            <input type="text" id="uat-merchant-id" placeholder="Enter UAT Merchant ID">
        </div>
        <div class="form-group">
            <label for="uat-api-key">API Key:</label>
            <input type="text" id="uat-api-key" placeholder="Enter UAT API Key">
        </div>
        <div class="form-group">
            <label for="uat-api-secret">API Secret:</label>
            <input type="password" id="uat-api-secret" placeholder="Enter UAT API Secret">
        </div>
        <div class="button-group">
            <button onclick="addCredential('uat')">Add Credential</button>
            <button onclick="testConnection('uat')">Test Connection</button>
            <button onclick="exportCredentials('uat')">Export</button>
            <button onclick="importCredentials('uat')">Import</button>
        </div>
        <div id="uat-status" class="status"></div>
    </div>
    
    <div id="production" class="tab-content">
        <h3>Production Environment Credentials</h3>
        <div class="form-group">
            <label for="prod-merchant-id">Merchant ID:</label>
            <input type="text" id="prod-merchant-id" placeholder="Enter Production Merchant ID">
        </div>
        <div class="form-group">
            <label for="prod-api-key">API Key:</label>
            <input type="text" id="prod-api-key" placeholder="Enter Production API Key">
        </div>
        <div class="form-group">
            <label for="prod-api-secret">API Secret:</label>
            <input type="password" id="prod-api-secret" placeholder="Enter Production API Secret">
        </div>
        <div class="button-group">
            <button onclick="addCredential('production')">Add Credential</button>
            <button onclick="testConnection('production')">Test Connection</button>
            <button onclick="exportCredentials('production')">Export</button>
            <button onclick="importCredentials('production')">Import</button>
        </div>
        <div id="production-status" class="status"></div>
    </div>

    <script>
        // Get VS Code API
        const vscode = acquireVsCodeApi();
        
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }
        
        function addCredential(environment) {
            vscode.postMessage({
                command: 'addCredential',
                environment: environment
            });
        }
        
        function testConnection(environment) {
            vscode.postMessage({
                command: 'testConnection',
                environment: environment
            });
        }
        
        function exportCredentials(environment) {
            vscode.postMessage({
                command: 'exportCredentials',
                environment: environment
            });
        }
        
        function importCredentials(environment) {
            vscode.postMessage({
                command: 'importCredentials',
                environment: environment
            });
        }
        
        // Listen for messages from the extension
        window.addEventListener('message', event => {
            const message = event.data;
            
            switch (message.command) {
                case 'showStatus':
                    showStatus(message.environment, message.type, message.text);
                    break;
            }
        });
        
        function showStatus(environment, type, text) {
            const statusElement = document.getElementById(`${environment}-status`);
            statusElement.textContent = text;
            statusElement.className = `status ${type}`;
            statusElement.style.display = 'block';
            
            // Hide status after 3 seconds
            setTimeout(() => {
                statusElement.style.display = 'none';
            }, 3000);
        }
    </script>
</body>
</html>